<div xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:o="http://openfaces.org/"
     class="Col4_234 darkgray">

  <div id="component" align="center">
    <script>
      var month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      function previousDay() {
        var dayTable = document.getElementById("form:dayTable");
        dayTable.previous();
        var date = dayTable.getDay();
        updateDate(date);
        O$.reloadComponents(['form:dateHidden']);
      }

      function updateDate(date) {
        document.getElementById("form:date").innerHTML = date.getDate();
        document.getElementById("form:month").innerHTML = month[date.getMonth()];
        document.getElementById("form:year").innerHTML = date.getFullYear();
        document.getElementById("form:dateHidden").value = twoDigit(date.getDate()) + "/" + twoDigit(date.getMonth()+1) + "/" + date.getFullYear();
      }

      function twoDigit(value) {
         var str = value.toString(10);
        if(str.length == 1) {
          str = "0" + str;
        }
        return str;
      }

      function nextDay() {
        var dayTable = document.getElementById("form:dayTable");
        dayTable.next();
        var date = dayTable.getDay();
        updateDate(date);
        O$.reloadComponents(['form:dateHidden']);
      }

      function initDate(){
        var dateText = document.getElementById("form:dateHidden").value;
        var elems = dateText.split("/");
        var date = new Date();
        date.setFullYear(elems[2], elems[1] - 1, elems[0]);
        updateDate(date);
      }


    </script>
    <h3 class="CalendarDate"><big><h:commandLink style="text-decoration:none;" onclick="previousDay();return false;"><h:outputText value="&#8592;&#160;" escape="false" /></h:commandLink></big>
      <h:outputText id="date" value="" styleClass="date"/>&#160;<h:outputText id="month" value="" styleClass="date"/>&#160;<h:outputText id="year" value="" styleClass="date"/>
      <big><h:commandLink style="text-decoration:none;" onclick="nextDay(); return false;"><h:outputText escape="false" value="&#8594;" /> </h:commandLink></big>
      <h:inputHidden id="dateHidden" value="#{DayTableBean1.date}">
        <f:convertDateTime pattern="dd/MM/yyyy"/>
      </h:inputHidden>
      <script>
        initDate();
      </script>
    </h3>
    <o:dayTable id="dayTable"
                events="#{DayTableBean1.events}"
                day="#{DayTableBean1.date}"
                startTime="6:00"
                timetableChangeListener="#{DayTableBean1.processTimetableChanges}"
                majorTimeStyle="font-family: MS Shell Dlg,Arial,sans-serif; font-size: 14pt;"
                timeSuffixStyle="font-size: 7pt; line-height: 1em;"
            >
      <o:timetableEvent style="text-align:center;" descriptionStyle="color: #5f5f5f;" escapeDescription="false" escapeName="false"/>
      <o:eventArea horizontalAlignment="rightEdge" verticalAlignment="above">
        <h:commandLink title="Postpone training for 1 hour" action="#{DayTableBean1.doLater}" style="margin: 10px">
          <h:outputText value="1&#160;hour&#160;later" escape="false"/>
        </h:commandLink>
      </o:eventArea>

      <o:eventActionBar>
        <o:eventAction id="customEventAction" actionListener="#{DayTableBean1.postponeEventActionListener}"
                       imageUrl="../images/daytable/customAction1.gif"
                       hint="Postpone for 1 day"/>
      </o:eventActionBar>
    </o:dayTable>
  </div>

  <div class="Col1_1 serif">
    <h4>Shown Functionality</h4>
    <ul>
      <li><strong>Inner HTML</strong> - event header and description may contain any HTML tags.</li>
      <li><strong>Custom action controls</strong> - it's possible to add custom actions to action bar. See the bottom line of an event (<h:graphicImage style="background-color:black;" url="../images/daytable/customAction1.gif"/>).</li>
      <li><strong>Embedded custom content areas</strong> - any tags can be put for event area. See <i>1 hour later</i> link at top right corner of event.</li>
      <li><strong>Reserved time intervals</strong> - user can't put any event for reserved time (grey box).</li>
    </ul>
  </div>
</div>