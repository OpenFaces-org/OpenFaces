<div xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:o="http://openfaces.org/">
  <div id="Demo">
    <script type="text/javascript">
      function previousDay() {
        O$.reloadComponents(['form:dayOfWeek', 'form:date', 'form:suffix', 'form:year'],
        {action : 'DayTableBean2.previousDay'});
        document.getElementById("form:dayTable").previous();
      }

      function nextDay() {
        O$.reloadComponents(['form:dayOfWeek', 'form:date', 'form:suffix', 'form:year'],
        {action : 'DayTableBean2.nextDay'});
        document.getElementById("form:dayTable").next();
      }

      function addBorder(element, red, green, blue) {
        element.style.border = "1px solid #" + twoDigit(red) + twoDigit(green) + twoDigit(blue);
        element.style.padding = "4px";
        element.style.paddingRight = "4px";
        element.style.paddingLeft = "4px";
      }

      function twoDigit(value) {
        var str = value.toString(16);
        if (str.length == 1) {
          str = "0" + str;
        }
        return str;
      }

      function removeBorder(element) {
        element.style.border = "none";
        element.style.paddingTop = "5px";
        element.style.paddingRight = "5px";
        element.style.paddingLeft = "5px";
      }
    </script>
    <h3 class="CalendarDate"><big><h:commandLink style="text-decoration:none; color:#808080"
                                                 onclick="previousDay();return false;"><h:outputText value="&#8592;"
                                                                                                     escape="false"/></h:commandLink></big><span
            style="padding-left:10px; padding-right:10px; color:#808080"><h:outputText
            id="dayOfWeek"
            value="#{DayTableBean2.date}">
      <f:convertDateTime pattern="EEEE," locale="en"/></h:outputText>&#160;<h:outputText id="date"
                                                                                         value="#{DayTableBean2.date}"
                                                                                         styleClass="date">
      <f:convertDateTime pattern="dd" locale="en"/>
    </h:outputText><h:outputText id="suffix" value="#{DayTableBean2.dateSuffixMap[DayTableBean2.date]}"
                                 styleClass="date"/>&#160;<h:outputText id="month"
                                                                        value="#{DayTableBean2.date}" styleClass="date">
      <f:convertDateTime pattern="MMMM" locale="en"/>
    </h:outputText>&#160;<h:outputText id="year" value="#{DayTableBean2.date}" styleClass="date">
      <f:convertDateTime pattern="yyyy" locale="en"/>
    </h:outputText></span><big><h:commandLink style="text-decoration:none; color:#808080"
                                              onclick="nextDay(); return false;"><h:outputText escape="false"
                                                                                               value="&#8594;"/>
    </h:commandLink></big>
    </h3>
    <o:dayTable id="dayTable"
                day="#{DayTableBean2.date}"

                events="#{DayTableBean2.events}"
                resources="#{DayTableBean2.resources}"

                timetableChangeListener="#{DayTableBean2.processTimetableChanges}"
                preloadedEvents="none"
                primaryRowSeparator="1px solid #c3c3c3"
                secondaryRowSeparator="1px solid #eeeeee"
                startTime="5:00"
                endTime="23:30"
                style="background-color:white; border:none;"
                timePattern="HH:mm"
                timeSuffixPattern=""
                timeTextPosition="againstMark"
                timeColumnStyle="color: black; background: transparent; font-size:10px"
                timeColumnPrimaryRowSeparator="none"
                timeColumnSecondaryRowSeparator="none"
                showTimeForMinorIntervals="false"

                timeColumnSeparator="none"
                resourceColumnSeparator="none"
                resourceHeadersRowStyle="font-size:10pt; border-top: 1px solid #7f7f7f; border-bottom: 1px solid #7f7f7f;"
                rowStyle="height: 25px;"
                eventBackgroundIntensityLevel="1"
                eventBackgroundTransparencyLevel="0"
                reservedTimeEventStyle="border-left: none; border-right: none; margin: 0;"
            >

      <o:timetableEvent styleClass="eventWithBackground" descriptionStyle="font-size:10pt" style="color:white;"
                        escapeDescription="false" escapeName="false"
                        nameStyle="white-space:normal; width:auto; font-size:10pt; font-weight:normal;"/>
      <o:eventPreview style="width: 270px; background: Cornsilk" eventNameStyle="font-size: 11pt;"/>
      <o:timetableEditingOptions autoSaveChanges="false"
                                 eventResourceEditable="true" eventDurationEditable="true"/>
      <f:facet name="resourceHeader">
        <h:outputText
                value="#{resource.object.name}"
                style="display:block; margin-left:6em; margin-right:6em; background-color:#{resource.object.color};  color:white;"/>
      </f:facet>
      <o:eventArea horizontalAlignment="rightEdge"
                   onmouseover="addBorder(this, #{event.color.red}, #{event.color.green},#{event.color.blue})"
                   onmouseout="removeBorder(this)" style="padding:5px 5px 5px 5px;" verticalAlignment="topEdge">
        <h:commandLink title="Remove" value=""
                       action="#{DayTableBean2.remove}">
          <h:graphicImage url="../images/daytable/close.png"/>
        </h:commandLink>
      </o:eventArea>
      <o:eventActionBar>
        <o:deleteEventAction rendered="false"/>
      </o:eventActionBar>
    </o:dayTable>
  </div>

  <div id="Description">
    <h4>Demonstrated Features</h4>
    <ul class="hang">
      <li><strong>Multi-resource tables support</strong> - each column displays events for different
        resources. You can drag an event between columns and drop it for reassigning to another resource.
      </li>
      <li><strong>Appearance customization</strong> - time column displays time for half-hour intervals and
        time slot rows have increased height.
      </li>
      <li>
        <strong>Specifying the visible time range</strong> - the timetable displays a time range of 6:00 &#8212; 23:00.
      </li>
      <li>
        <strong>Handling large data sets</strong> - DayTable component may be configured to avoid preloading of events currently not visible for user.
        In this case events are loaded on-demand with Ajax when switching the current day displayed.
      </li>
    </ul>
  </div>
</div>