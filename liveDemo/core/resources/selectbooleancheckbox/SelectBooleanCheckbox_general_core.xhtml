<div xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:o="http://openfaces.org/" xmlns:c="http://java.sun.com/jstl/core"
        >

  <div id="Demo">
    <h:panelGroup id="permissionsTable" layout="block">
      <o:dataTable value="#{PermissionSchema.permissions}" var="permission"
                   horizontalGridLines="1px solid #d6d7d8"
                   style="border:none"
                   headerRowStyle="background: url('../images/treetable/tableHeader.gif') repeat-x; height: 20px; font-size:0.85em;"
                   bodyRowStyle="height: 21px; ">
        <o:row condition="#{PermissionSchema.isSeparator[permission]}">
          <o:cell span="4">
            <nobr/>
          </o:cell>
        </o:row>

        <o:column width="150"
                headerStyle="text-align: left; padding-left: 5px; padding-right: 5px;">
          <f:facet name="header">
            <h:outputText value="Permission"/>
          </f:facet>
          <h:outputText value="#{permission.label}"/>
        </o:column>
        <o:column width="75"
                  bodyStyle="text-align: center; white-space: nowrap; padding-left: 5px; padding-right: 5px;"
                  headerStyle="text-align: center; padding-left: 5px; padding-right: 5px;">
          <c:set var="group" value="#{PermissionSchema.permissionGroup['ANONYMOUS']}"/>
          <f:facet name="header">
            <h:outputText value="#{group.label}"/>
          </f:facet>
          <c:set var="stateList"
                 value="#{PermissionSchema.permissionsAssignment[group][permission].dependent ? PermissionSchema.dependentStateList :PermissionSchema.defaultStateList}"/>
          <o:selectBooleanCheckbox triStateAllowed="true"
                                   value="#{PermissionSchema.permissionsAssignment[group][permission].outputState}"
                                   undefinedImageUrl="../images/selectbooleancheckbox/undefinedCheckbox.png"                                   
                                   stateList="#{stateList}"
                                   onchange="O$.ajax.request(this, event, {render: 'form:permissionsTable', listener: 'PermissionSchema.updateAssignment', actionComponent: this.id});">
            <f:param name="group" value="#{group}"/>
            <f:param name="permission" value="#{permission}"/>
          </o:selectBooleanCheckbox>
        </o:column>

        <o:column width="75"
                  bodyStyle="text-align: center; white-space: nowrap; padding-left: 5px; padding-right: 5px;"
                  headerStyle="text-align: center; padding-left: 5px; padding-right: 5px;">
          <c:set var="group" value="#{PermissionSchema.permissionGroup['USER']}"/>
          <f:facet name="header">
            <h:outputText value="#{group.label}"/>
          </f:facet>
          <c:set var="stateList"
                 value="#{PermissionSchema.permissionsAssignment[group][permission].dependent ? PermissionSchema.dependentStateList :PermissionSchema.defaultStateList}"/>
          <o:selectBooleanCheckbox triStateAllowed="true"
                                   value="#{PermissionSchema.permissionsAssignment[group][permission].outputState}"
                                   undefinedImageUrl="../images/selectbooleancheckbox/undefinedCheckbox.png"
                                   stateList="#{stateList}"
                                   onchange="O$.ajax.request(this, event, {render: 'form:permissionsTable', listener: 'PermissionSchema.updateAssignment', actionComponent: this.id});">
            <f:param name="group" value="#{group}"/>
            <f:param name="permission" value="#{permission}"/>
          </o:selectBooleanCheckbox>
        </o:column>

        <o:column width="75"
                  bodyStyle="text-align: center; white-space: nowrap; padding-left: 5px; padding-right: 5px;"
                  headerStyle="text-align: center; padding-left: 5px; padding-right: 5px;">
          <c:set var="group" value="#{PermissionSchema.permissionGroup['ADMINISTRATOR']}"/>
          <f:facet name="header">
            <h:outputText value="#{group.label}"/>
          </f:facet>
          <c:set var="stateList"
                 value="#{PermissionSchema.permissionsAssignment[group][permission].dependent ? PermissionSchema.dependentStateList :PermissionSchema.defaultStateList}"/>
          <o:selectBooleanCheckbox triStateAllowed="true"
                                   value="#{PermissionSchema.permissionsAssignment[group][permission].outputState}"
                                   undefinedImageUrl="../images/selectbooleancheckbox/undefinedCheckbox.png"
                                   stateList="#{stateList}"
                                   onchange="O$.ajax.request(this, event, {render: 'form:permissionsTable', listener: 'PermissionSchema.updateAssignment', actionComponent: this.id});">
            <f:param name="group" value="#{group}"/>
            <f:param name="permission" value="#{permission}"/>
          </o:selectBooleanCheckbox>
        </o:column>
      </o:dataTable>
    </h:panelGroup>
  </div>
  <div id="Description">
    <h4>Demonstrated Features</h4>
    <ul class="hang">
      <li><strong>Tri-state mode</strong> - The third 'undefined' state in this demo has a special meaning and allows to show a 'dependent' permission state.
      </li>
      <li><strong>Customized states list</strong> - For a permission in 'dependent' state the checkbox is configured to have only two states: 'selected' and 'undefined', in other case - only states 'selected' and 'unselected' are allowed for user to cycle through.
      </li>
    </ul>
  </div>

</div>
