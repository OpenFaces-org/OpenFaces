<div xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:o="http://openfaces.org/" xmlns:c="http://java.sun.com/jsp/jstl/core"
        >

  <div id="Demo">
    <div style="text-align: center; font-weight: bold; font-size: 20px;">Construction in progress...</div>
    <o:selectBooleanCheckbox id="normalCheckbox"/>
    <h:outputLabel for="normalCheckbox" value="Normal checkbox"/>
    <br/>
    <o:selectBooleanCheckbox id="triStateCheckbox" triStateAllowed="true"/>
    <h:outputLabel for="triStateCheckbox" value="Tri-state checkbox"/>
    <br/>
    <br/>
    <c:set var="defaultStateList" value="selected, unselected"/>
    <c:set var="dependentStateList" value="selected, undefined"/>

    <h:panelGroup id="permissionsTable">
      <o:forEach items="#{PermissionSchema.permissions}" var="permission">
        <o:selectBooleanCheckbox triStateAllowed="true"
                                 value="#{PermissionSchema.permissionsAssignment['USER'][permission].state}"
                                 stateList="#{PermissionSchema.permissionsAssignment['USER'][permission].dependent ? defaultStateList : dependentStateList}">
          <o:ajax event="change" render="permissionsTable"/>
        </o:selectBooleanCheckbox>
        <h:outputText value="!" rendered="#{PermissionSchema.permissionsAssignment['USER'][permission].dependent}"/>
        <o:selectBooleanCheckbox triStateAllowed="true"
                                 value="#{PermissionSchema.permissionsAssignment['ANONYMOUS'][permission].state}"
                                 stateList="#{PermissionSchema.permissionsAssignment['USER'][permission].dependent ? defaultStateList : dependentStateList}">
          <o:ajax event="change" render="permissionsTable"/>
        </o:selectBooleanCheckbox>
        <o:selectBooleanCheckbox triStateAllowed="true"
                                 value="#{PermissionSchema.permissionsAssignment['ADMINISTRATOR'][permission].state}"
                                 stateList="#{PermissionSchema.permissionsAssignment['USER'][permission].dependent ? defaultStateList : dependentStateList}">
          <o:ajax event="change" render="permissionsTable"/>
        </o:selectBooleanCheckbox>
        <br/>
      </o:forEach>
    </h:panelGroup>


    <!--h:panelGroup id="permissionsTable">
    <o:dataTable value="#{PermissionSchema.permissions}" var="permission">
      <o:column>
        <h:outputText value="#{permission.label}"/>
      </o:column>
      <o:columns value="#{PermissionSchema.permissionGroups}" var="group">
        <f:facet name="header">
          <h:outputText value="#{group}"/>
        </f:facet>
        <o:selectBooleanCheckbox triStateAllowed="true"
                                 value="#{PermissionSchema.permissionsAssignment[group][permission].state}"
                                 stateList="#{PermissionSchema.permissionsAssignment[group][permission].dependent ? state1 : state2}">
          <o:ajax event="change" render="permissionsTable" execute="permissionsTable"/>
        </o:selectBooleanCheckbox>
      </o:columns>
    </o:dataTable>
    </h:panelGroup->

    <!-o:forEach id="permissionsTable" items="#{PermissionSchema.permissions}" var="permission"
               statusVar="permissionStatus">
      <o:forEach items="#{PermissionSchema.permissionGroups}" var="group" rendered="#{permissionStatus.first}">
        <h:outputText value="#{group}"/>
      </o:forEach>
      <o:forEach items="#{PermissionSchema.permissionGroups}" var="group" statusVar="groupStatus">
        <h:outputText value="#{permission.label}" rendered="#{groupStatus.first}"/>
        <o:selectBooleanCheckbox triStateAllowed="true"
                                 value="#{PermissionSchema.permissionsAssignment[group][permission].state}"
                                 stateList="#{PermissionSchema.permissionsAssignment[group][permission].dependent ? state1 : state2}">
          <o:ajax event="change" render="permissionsTable" execute="permissionsTable"/>
        </o:selectBooleanCheckbox>
      </o:forEach>
      <br/>
    </o:forEach-->
  </div>
  <h:commandButton/>
  <div id="Description">
    <h4>Demonstrated Features</h4>
    <ul class="hang">
      <li><strong>Feature 1</strong> - feature 1 description.
      </li>
      <li><strong>Feature 2</strong> - feature 2 description.
      </li>
    </ul>
  </div>

</div>
